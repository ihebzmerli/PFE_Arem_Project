<nb-card>
  <nb-card-header>
    Table de rectif
  </nb-card-header>
  <nb-card-body>
      <div class="col-md-6">
        <input nbInput class="form-control" type="text" name="search" [(ngModel)]="searchText" autocomplete="off" placeholder="&#61442;  chercher tout">
      </div>


    <div *ngIf="!previewTableAllRectifExcelPdf" class="container">
      <table class="table table-bordered table-striped">
        <thead>
        <tr>
          <th style="text-align: center">
            <label class="label">N~ Rectif</label>
            <div class="form-group">
              <input type="text" nbInput class="form-control" placeholder="search Id Rectif"
              style="width:150px" [(ngModel)]="searchTermIdRectif" />
            </div>
          </th>
          
          <th style="text-align: center"><label class="label">date</label>
          </th>
          
          <th *ngIf="authority==='ROLE_ADMIN' || authority==='ROLE_TRANSITAIRE' || authority==='ROLE_PREPARATEUR_BR'" style="text-align: center">
            <label class="label">numDoc</label>
            <div class="form-group">
              <input type="text" nbInput class="form-control" placeholder="search By NumDoc"
              style="width:150px" [(ngModel)]="searchTermNumDoc"/>
            </div>
          </th>
          <th style="text-align: center">
            <label class="label">qutArt</label>
            <div class="form-group">
              <input type="text" nbInput class="form-control" placeholder="search By QutArt"
              style="width:150px" [(ngModel)]="searchTermQutArt"/>
            </div>
          </th>
          <th style="text-align: center">
            <label class="label">prixAch</label>
            <div class="form-group">
              <input type="text" nbInput class="form-control" placeholder="search By PrixAch"
              style="width:150px" [(ngModel)]="searchTermPrixAch"/>
            </div>
          </th>
          <th style="text-align: center">
            <label class="label">observ</label>
            <div class="form-group">
              <input type="text" nbInput class="form-control" placeholder="search By Observ"
              style="width:150px" [(ngModel)]="searchTermObserv"/>
            </div>
          </th>
          <th *ngIf="authority==='ROLE_ADMIN' || authority==='ROLE_TRANSITAIRE' || authority==='ROLE_PREPARATEUR_BR'" style="text-align: center">
            <label class="label">typMvt</label>
            <div class="form-group">
              <input type="text" nbInput class="form-control" placeholder="search By TypMvt"
              style="width:150px" [(ngModel)]="searchTermTypMvt"/>
            </div>
          </th>
          <th *ngIf="authority==='ROLE_ADMIN' || authority==='ROLE_TRANSITAIRE' || authority==='ROLE_PREPARATEUR_BR'" style="text-align: center">
            <label class="label">numRec</label>
            <div class="form-group">
              <input type="text" nbInput class="form-control" placeholder="search By NumRec"
              style="width:150px" [(ngModel)]="searchTermNumRec"/>
            </div>
          </th>
          <th *ngIf="authority==='ROLE_ADMIN' || authority==='ROLE_TRANSITAIRE' || authority==='ROLE_PREPARATEUR_BR'" style="text-align: center">
            <label class="label">centre</label>
            <div class="form-group">
              <input type="text" nbInput class="form-control" placeholder="search By Centre"
              style="width:150px" [(ngModel)]="searchTermCentre"/>
            </div>
          </th>
          <th *ngIf="authority==='ROLE_ADMIN' || authority==='ROLE_TRANSITAIRE' || authority==='ROLE_PREPARATEUR_BR'" style="text-align: center">
            <label class="label">datReclam</label>
          </th>
          <th *ngIf="authority==='ROLE_ADMIN' || authority==='ROLE_TRANSITAIRE' || authority==='ROLE_PREPARATEUR_BR'" style="text-align: center">
            <label class="label">reclam</label>
            <div class="form-group">
              <input type="text" nbInput class="form-control" placeholder="search By Reclam"
              style="width:150px" [(ngModel)]="searchTermReclam"/>
            </div>
          </th>
          <th *ngIf="authority==='ROLE_ADMIN' || authority==='ROLE_TRANSITAIRE' || authority==='ROLE_PREPARATEUR_BR'" style="text-align: center">
            <label class="label">cloture</label>
            <div class="form-group">
              <input type="text" nbInput class="form-control" placeholder="search By Cloture"
              style="width:150px" [(ngModel)]="searchTermCloture"/>
            </div>
          </th>

          <th *ngIf="authority==='ROLE_ADMIN' || authority==='ROLE_TRANSITAIRE' || authority==='ROLE_PREPARATEUR_BR'" style="text-align: center">
            <label class="label">obsReclam</label>
            <div class="form-group">
              <input type="text" nbInput class="form-control" placeholder="search By ObsReclam"
              style="width:150px" [(ngModel)]="searchTermObsReclam"/>
            </div>
          </th>
          <th *ngIf="authority==='ROLE_ADMIN' || authority==='ROLE_TRANSITAIRE' || authority==='ROLE_PREPARATEUR_BR'" style="text-align: center">
            <label class="label">datRepon</label>
          </th>
          <th *ngIf="authority==='ROLE_ADMIN' || authority==='ROLE_TRANSITAIRE' || authority==='ROLE_PREPARATEUR_BR'" style="text-align: center">
            <label class="label">datClotur</label>
          </th>
          <th *ngIf="authority==='ROLE_ADMIN' || authority==='ROLE_TRANSITAIRE' || authority==='ROLE_PREPARATEUR_BR'" style="text-align: center">
            <label class="label">Actions</label>
          </th>

        </tr>
        </thead>
        <tbody>
        <tr *ngFor="let rectif of filteredRectifs | filter:searchText">
          <td style="text-align: center" class="field-multiple-drag"><span><p>{{rectif.id_rectif}}</p></span></td>
          <td style="text-align: center" class="field-multiple-drag"><span><p>{{rectif.date | date: 'MMM d, y H:mm:ss' : '+0000'}}</p></span></td>
          <td *ngIf="authority==='ROLE_ADMIN' || authority==='ROLE_TRANSITAIRE' || authority==='ROLE_PREPARATEUR_BR'" style="text-align: center" class="field-multiple-drag"><span><p>{{rectif.numDoc}}</p></span></td>
          <td style="text-align: center" class="field-multiple-drag"><span><p>{{rectif.qutArt}}</p></span></td>
          <td style="text-align: center" class="field-multiple-drag"><span><p>{{rectif.prixAch}}</p></span></td>
          <td style="text-align: center" class="field-multiple-drag"><span><p>{{rectif.observ}}</p></span></td>
          <td *ngIf="authority==='ROLE_ADMIN' || authority==='ROLE_TRANSITAIRE' || authority==='ROLE_PREPARATEUR_BR'" style="text-align: center" class="field-multiple-drag"><span><p>{{rectif.typMvt}}</p></span></td>
          <td *ngIf="authority==='ROLE_ADMIN' || authority==='ROLE_TRANSITAIRE' || authority==='ROLE_PREPARATEUR_BR'" style="text-align: center" class="field-multiple-drag"><span><p>{{rectif.numRec}}</p></span></td>
          <td *ngIf="authority==='ROLE_ADMIN' || authority==='ROLE_TRANSITAIRE' || authority==='ROLE_PREPARATEUR_BR'" style="text-align: center" class="field-multiple-drag"><span><p>{{rectif.centre}}</p></span></td>
          <td *ngIf="authority==='ROLE_ADMIN' || authority==='ROLE_TRANSITAIRE' || authority==='ROLE_PREPARATEUR_BR'" style="text-align: center" class="field-multiple-drag"><span><p>{{rectif.datReclam | date:'short'}}</p></span></td>
          <td *ngIf="authority==='ROLE_ADMIN' || authority==='ROLE_TRANSITAIRE' || authority==='ROLE_PREPARATEUR_BR'" style="text-align: center" class="field-multiple-drag"><span *ngIf="rectif.reclam==true"><p>Vrai</p></span><span *ngIf="rectif.reclam==false"><p>faux</p></span></td>
          <td *ngIf="authority==='ROLE_ADMIN' || authority==='ROLE_TRANSITAIRE' || authority==='ROLE_PREPARATEUR_BR'" style="text-align: center" class="field-multiple-drag"><span *ngIf="rectif.cloture==true"><p>Vrai</p></span><span *ngIf="rectif.cloture==false"><p>faux</p></span></td>
          <td *ngIf="authority==='ROLE_ADMIN' || authority==='ROLE_TRANSITAIRE' || authority==='ROLE_PREPARATEUR_BR'" style="text-align: center" class="field-multiple-drag"><span><p>{{rectif.obsReclam}}</p></span></td>
          <td *ngIf="authority==='ROLE_ADMIN' || authority==='ROLE_TRANSITAIRE' || authority==='ROLE_PREPARATEUR_BR'" style="text-align: center" class="field-multiple-drag"><span><p>{{rectif.datRepon | date:'short'}}</p></span></td>
          <td *ngIf="authority==='ROLE_ADMIN' || authority==='ROLE_TRANSITAIRE' || authority==='ROLE_PREPARATEUR_BR'" style="text-align: center" class="field-multiple-drag"><span><p>{{rectif.datClotur | date:'short'}}</p></span></td>

          <td class="field-multiple-drag">
            <div class="buttons-row">
              <div *ngIf="authority==='ROLE_ADMIN' || authority==='ROLE_TRANSITAIRE'" class="form-group">
                <button style="border-radius: 0.75rem;width: 110px;height: 38px;" nbButton type="button" [status]="warning" [size]="small" [shape]="semi-round" class="btn btn-md btn-outline-warning" (click)="goToModifier(rectif.id_rectif)" outline>
                  <i class="fa fa-edit"></i>Modifier</button>
                <button style="border-radius: 0.75rem;width: 110px;height: 38px;" nbButton class="btn btn-md btn-outline-danger" type="button" [shape]="semi-round" [size]="medium" [status]="danger" (click)="OpenDeletePopap(rectif.id_rectif)" outline>
                  <i class="fa fa-remove"></i>Supprimer</button>
              </div>
            </div>  
          </td>
        </tr>
        </tbody>
      </table>
    </div>
  </nb-card-body>
</nb-card>
